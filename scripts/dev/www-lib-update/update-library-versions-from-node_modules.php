<?php

$pathnew = dirname(__FILE__) . '/node_modules';
chdir( dirname(__FILE__) . '/../../../www/lib' );

$packages = array(
    'chart.js'     => array(
        'copy' => array(
            'chart.js/dist/Chart.bundle.min.js' => 'chart.js/Chart.bundle.min.js',
            'chart.js/LICENSE.md' => 'chart.js/LICENSE.md',
        ),
    ),
    'font-awesome' => array(
        'copy' => array( 
            'font-awesome/css/font-awesome.css'            => 'font-awesome/css/font-awesome.css',
            'font-awesome/css/font-awesome.css.map'        => 'font-awesome/css/font-awesome.css.map',
            'font-awesome/css/font-awesome.min.css'        => 'font-awesome/css/font-awesome.min.css',
            'font-awesome/README.md'                       => 'font-awesome/README.md',
            'font-awesome/fonts/FontAwesome.otf'           => 'font-awesome/fonts/FontAwesome.otf',
            'font-awesome/fonts/fontawesome-webfont.eot'   => 'font-awesome/fonts/fontawesome-webfont.eot',
            'font-awesome/fonts/fontawesome-webfont.svg'   => 'font-awesome/fonts/fontawesome-webfont.svg',
            'font-awesome/fonts/fontawesome-webfont.ttf'   => 'font-awesome/fonts/fontawesome-webfont.ttf',
            'font-awesome/fonts/fontawesome-webfont.woff'  => 'font-awesome/fonts/fontawesome-webfont.woff',
            'font-awesome/fonts/fontawesome-webfont.woff2' => 'font-awesome/fonts/fontawesome-webfont.woff2',
        ),
    ),
    'jquery' => array(
        'copy' => array(
            'jquery/LICENSE.txt'         => 'jquery/LICENSE.txt',
            'jquery/dist/jquery.min.js'  => 'jquery/jquery.min.js',
            'jquery/dist/jquery.min.map' => 'jquery/jquery.min.map',
        ),
    ),
    'jquery-ui-dist' => array(
        'copy' => array(
            'jquery-ui-dist/LICENSE.txt'        => 'jquery-ui/LICENSE.txt',
            'jquery-ui-dist/jquery-ui.min.css'  => 'jquery-ui/jquery-ui.min.css',
            'jquery-ui-dist/jquery-ui.min.js'   => 'jquery-ui/jquery-ui.min.js',
            'jquery-ui-dist/jquery-ui.structure.min.css'   => 'jquery-ui/jquery-ui.structure.min.css',
            'jquery-ui-dist/jquery-ui.theme.min.css'       => 'jquery-ui/jquery-ui.theme.min.css',
        ),
    ),


);


$verbose = 1;



foreach( $packages as $pkg => $d ) {
    echo "Copying package $pkg\n";
    foreach( $d['copy'] as $srcpath => $dstpath ) {
        if( $verbose ) {
            echo "   Copying $srcpath to $dstpath \n";
        }
        if (!is_dir(dirname($dstpath))) {
            mkdir(dirname($dstpath), 0777, true);
        }
        copy( $pathnew . '/' . $srcpath, $dstpath );
    }
}
